<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:sockets="http://www.mulesoft.org/schema/mule/sockets"
	xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit"
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns:circuit-breaker="http://www.mulesoft.org/schema/mule/circuit-breaker"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/circuit-breaker http://www.mulesoft.org/schema/mule/circuit-breaker/current/mule-circuit-breaker.xsd
http://www.mulesoft.org/schema/mule/sockets http://www.mulesoft.org/schema/mule/sockets/current/mule-sockets.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<circuit-breaker:config name="Circuit_breaker_Config" doc:name="Circuit-breaker Config" doc:id="136545ff-f2c9-488c-a5b4-d871c64caea9" threshold="4" timeout="30000" breakerName="default-braker"/>
	<http:request-config name="HTTP_Request_configuration" doc:name="HTTP Request configuration" doc:id="8a5fdeb9-9c40-4bf7-87dc-46138c5d8e8d" >
		<http:request-connection host="localhost" port="8099" />
	</http:request-config>
	<flow name="insurance-gatewayFlow" doc:id="1387ca78-2a60-4ade-b030-79c82e74e7bc" >
		<circuit-breaker:filter doc:name="Filter Circuit Breaker" doc:id="10385ef9-68f6-48f9-9750-c7a27d7023e6" config-ref="Circuit_breaker_Config"/>
		<http:request method="POST" doc:name="Create consent" doc:id="9c72d544-7b1b-43f4-aa0c-1eecab66dcc2" config-ref="HTTP_Request_configuration" path="/consents" />
		<round-robin doc:name="Round Robin" doc:id="08771922-4f31-4651-9680-118d1f73d28d" >
			<route >
				<logger level="INFO" doc:name="Logger" doc:id="26f12865-61a2-44b0-b1ba-5d2546e356bf" message="Route 1 "/>
			</route>
			<route >
				<logger level="INFO" doc:name="Logger" doc:id="9106acec-7d6e-421f-a969-51801b7b63e2" message="Route 2 "/>
			</route>
		</round-robin>
		<error-handler >
			<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="15006555-2597-4690-96cf-de0fc2c45004" >
				<circuit-breaker:record-failure doc:name="Record failure" doc:id="062aac5f-53af-4d07-9ba5-b85db3ce0df6" config-ref="Circuit_breaker_Config" />
			</on-error-propagate>
		</error-handler>
	</flow>
</mule>
